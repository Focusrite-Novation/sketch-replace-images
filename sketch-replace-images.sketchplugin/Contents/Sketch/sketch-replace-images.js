var that=this;function __skpm_run(t,e){that.context=e;var r=function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e,r){(function(e,r){if(!e._skpmEnabled){function n(t,r){var n=Array.prototype.slice.call(r);n.forEach(function(t){try{log(e._skpmPrefix+function(){for(var t="",e=0;e<a;e++)t+="  ";a>0&&(t+="| ");return t}()+t)}catch(e){log(t)}})}e._skpmPrefix="console> ";var a=0;var i=e.group;e.group=function(){i&&i.apply(this,arguments),a+=1};var o=e.groupCollapsed;e.groupCollapsed=function(){o&&o.apply(this,arguments),a+=1};var s=e.groupEnd;e.groupEnd=function(){s&&s.apply(this,arguments),(a-=1)<0&&(a=0)};var l={},u=e.count;e.count=function(t){return l[t=void 0!==t?t:"Global"]=(l[t]||0)+1,u&&u.apply(this,arguments),n(0,[t+": "+l[t]])};var c={},f=e.time;e.time=function(t){if(f&&f.apply(this,arguments),c[t=void 0!==t?t:"default"])return n(0,['Timer "'+t+'" already exists']);c[t]=Date.now()};var p=e.timeEnd;e.timeEnd=function(t){if(p&&p.apply(this,arguments),!c[t=void 0!==t?t:"default"])return n(0,['Timer "'+t+'" does not exist']);var e=Date.now()-c[t];return delete c[t],n(0,[t+": "+e/1e3+"ms"])};var d=e.log;e.log=function(){return d&&d.apply(this,arguments),n(0,arguments)};var g=e.warn;e.warn=function(){return g&&g.apply(this,arguments),n(0,arguments)};var h=e.error;e.error=function(){return h&&h.apply(this,arguments),n(0,arguments)};var v=e.assert;e.assert=function(t,e){if(v&&v.apply(this,arguments),!t)return n(0,[e])};var y=e.info;e.info=function(){return y&&y.apply(this,arguments),n(0,arguments)};var m=e.clear;e.clear=function(){m&&m()},e._skpmEnabled=!0,(void 0!==r?r:this).console=e}t.exports=e}).call(e,r(0),r(2))},function(t,e,r){(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){var r=NSFileManager.defaultManager(),a=e.document,i=a.fileURL().toString().stringByDeletingLastPathComponent();log("SketchReplaceImages - trying to update images...");var o=i;/\/$/.test(o)||(o+="/");var s=NSURL.URLWithString_relativeToURL(o,a.fileURL()),l=n.loadDefaults();l&&(o=l,s=NSURL.URLWithString(o));var u=r.fileExistsAtPath(s.path());if(t.log("isValidPath: "+u),0!==u){t.log("url: "+s);var c,f,p=r.enumeratorAtPath(s.path()),d=a.currentPage().children(),g=NSArray.arrayWithArray(["png","jpg","jpeg"]),h=NSMutableDictionary.dictionary(),v=[];for(t.log("collecting available images...");c=p.nextObject();){var y=c.toString().lastPathComponent(),m=y.pathExtension();g.containsObject(m)&&h.setObject_forKey(c,y)}t.log("updating images...");for(var S=h.allKeys(),U=0;U<d.count();U++){var b=d[U];if("MSBitmapLayer"==b.class().toString())for(var _=0;_<g.count();_++){var x=g.objectAtIndex(_),D=b.name()+"."+x;if(S.containsObject(D)){var R=h.objectForKey(D);if(R=R.stringByAddingPercentEscapesUsingEncoding(NSUTF8StringEncoding),f=l?NSURL.URLWithString(o+R):NSURL.URLWithString_relativeToURL(R,s),r.fileExistsAtPath(f.path())){var j=NSImage.alloc().initByReferencingFile(f.path());if(j.isValid()){var L=b.frame().width(),N=b.frame().height();MSReplaceImageAction.alloc().init().applyImage_tolayer(j,b),b.frame().setWidth(L),b.frame().setHeight(N),v.push(D);break}}}}}v.length>0?a.showMessage(v.length+" images updated."):a.showMessage("Sorry, couldn't update images...")}else a.showMessage("Sorry, can't find a valid directory. Try (re-)setting the path url.")};var n=r(3)}).call(e,r(0))},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e){var r="de.shakemno.sketch-replace-images.defaultsKey";t.exports={loadDefaults:function(){return function(){return NSUserDefaults.standardUserDefaults().objectForKey(r)}}(),saveDefaults:function(){return function(t){NSUserDefaults.standardUserDefaults().setObject_forKey(t,r),NSUserDefaults.standardUserDefaults().synchronize()}}(),clearDefaults:function(){return function(){NSUserDefaults.standardUserDefaults().removeObjectForKey(r),NSUserDefaults.standardUserDefaults().synchronize()}}()}}]);"default"===t&&"function"==typeof r?r(e):r[t](e)}that.onRun=__skpm_run.bind(this,"default");